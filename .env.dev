# ============================================================================
# Airlock Development Environment Variables
# ============================================================================
# This file contains all environment variables for development
# Dev-only variables are marked with comments
#
# Usage:
#   docker-compose -f docker-compose.prod.yml -f docker-compose.dev.yml --env-file .env.dev up
#
# ============================================================================

# ============================================================================
# Database Configuration (PostgreSQL)
# ============================================================================
# Used by: postgres, api-gateway, auth-service, user-service, api-key-service,
#          submission-service, workflow-service, license-agent, tracking-service
POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_DB=airlock_dev
POSTGRES_USER=airlock_dev
POSTGRES_PASSWORD=dev_password_change_me

# ============================================================================
# Message Broker Configuration (RabbitMQ)
# ============================================================================
# Used by: rabbitmq, api-gateway, submission-service, workflow-service,
#          trivy-agent, license-agent, review-agent
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_USER=airlock_dev
RABBITMQ_PASSWORD=dev_password_change_me

# Development Only: RabbitMQ Management UI Port
# Used by: rabbitmq (exposed in docker-compose.dev.yml)
RABBITMQ_MANAGEMENT_PORT=15672

# ============================================================================
# OAuth2 Provider Configuration
# ============================================================================
# Used by: auth-service
# Development: Using mock OAuth service (http://mock-oauth:9000)
# Production: Set to ADFS endpoints
OAUTH2_AUTHORIZATION_URL=http://mock-oauth:9000/oauth/authorize
OAUTH2_TOKEN_URL=http://mock-oauth:9000/oauth/token
OAUTH2_USERINFO_URL=http://mock-oauth:9000/oauth/userinfo
OAUTH2_ISSUER=http://mock-oauth:9000

# OAuth2 Client Configuration
# Used by: auth-service
OAUTH2_CLIENT_ID=airlock-client
OAUTH2_CLIENT_SECRET=
OAUTH2_REDIRECT_URI=http://localhost:8001/api/v1/auth/callback
FRONTEND_CALLBACK_URI=http://localhost:3000/auth/callback

# ============================================================================
# JWT Configuration
# ============================================================================
# Used by: api-gateway, auth-service, api-key-service, mock-oauth
JWT_SECRET_KEY=dev_secret_key_change_me_in_production
JWT_ALGORITHM=HS256
JWT_ISSUER=airlock-auth-service

# Token Expiry Configuration
# Used by: auth-service, mock-oauth
ACCESS_TOKEN_EXPIRY_MINUTES=15
REFRESH_TOKEN_EXPIRY_DAYS=7

# ============================================================================
# Service Configuration
# ============================================================================

# API Gateway
# Used by: api-gateway (port mapping)
API_GATEWAY_PORT=8000

# Auth Service
# Used by: api-gateway (service URL), auth-service (port mapping in dev)
AUTH_SERVICE_URL=http://auth-service:8000
AUTH_SERVICE_PORT=8001

# Frontend
# Used by: frontend (port mapping and VITE build-time variable)
FRONTEND_PORT=3000
VITE_API_BASE_URL=http://localhost:8000/api/v1

# ============================================================================
# Development Only Variables
# ============================================================================

# Mock OAuth Service (development only - not used in production)
# Used by: mock-oauth (port mapping in docker-compose.dev.yml)
MOCK_OAUTH_PORT=9000

# pgAdmin Database Management Tool (development only - not used in production)
# Used by: pgadmin (port mapping and credentials in docker-compose.dev.yml)
PGADMIN_PORT=5050
PGADMIN_EMAIL=admin@airlock.dev
PGADMIN_PASSWORD=admin

# ============================================================================
# Logging Configuration
# ============================================================================
# Used by: All services
# Development: Use DEBUG level for detailed logging
LOG_LEVEL=DEBUG
